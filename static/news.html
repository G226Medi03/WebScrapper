<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Candlestick Chart</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>

<body>
    <div id="candlestick-chart" style="width:700px;height:500px;"></div>

    <script type="module">

        function StockCandle(date, open, close, high, low) {
            return { "date": date, "open": open, "close": close, "high": high, "low": low };
        }


        let stockCandles = [
            StockCandle('2024-01-01', 118, 120, 125, 115),
            StockCandle('2024-01-02', 125, 130, 135, 120),
            StockCandle('2024-01-03', 128, 125, 130, 122,),
            StockCandle('2024-01-04', 132, 130, 115, 135),
        ]

        let x_arr = stockCandles.map((candle) => {
            return candle.date;
        })
        let open_arr = stockCandles.map((candle) => {
            return candle.open;
        })
        let close_arr = stockCandles.map((candle) => {
            return candle.close;
        })
        let high_arr = stockCandles.map((candle) => {
            return candle.high;
        })
        let low_arr = stockCandles.map((candle) => {
            return candle.low;
        })

        console.log(x_arr);

        var data = [{
            decreasing: { line: { color: 'red' } },
            increasing: { line: { color: 'green' } },
            type: 'candlestick',
            xaxis: 'x',
            yaxis: 'y',

            x: x_arr,
            open: open_arr,
            close: close_arr,
            high: high_arr,
            low: low_arr,
        }];


        var layout = {
            title: 'Stock Price Candlestick Chart',
            xaxis: {
                rangeslider: { visible: false }
            },
            yaxis: {
            }
        };

        Plotly.newPlot('candlestick-chart', data, layout);
    </script>
</body>

</html>